#+STARTUP: overview
* User Details
#+begin_src emacs-lisp
;;; config.el -*- lexical-binding: t; -*-
;; Some functionality uses this to identify you, e.g. GPG configuration, email
;; clients, file templates and snippets
(setq user-full-name "Eugene Rwagasore"
      user-mail-address "rwagasore@gmail.com")
#+end_src

* Sane Defaults
#+begin_src emacs-lisp
(setq-default
 delete-by-moving-to-trash t
 window-combination-resize t)

(setq mac-mouse-wheel-smooth-scroll t)

;; Increase amount of data read from process
(setq read-process-output-max (* 1024 1024)) ;; 1mb

;; autosave
(auto-save-visited-mode t)
(setq auto-save-timeout 1)
(setq auto-save-interval 50)
(setq auto-save-visited-file-name t)
(setq default-directory "~")
#+end_src

* Font Rendering
#+begin_src emacs-lisp
(setq doom-font (font-spec :family "PragmataPro Liga" :size 16)
      doom-big-font (font-spec :family "PragmataPro Liga" :size 27)
      default-text-properties '(line-spacing 0.125 line-height 1.125))
#+end_src

* Theme Configurations
#+begin_src emacs-lisp
(defun my/apply-theme (appearance)
  "Load theme, taking current system APPEARANCE into consideration."
  (mapc #'disable-theme custom-enabled-themes)
  (pcase appearance
    ('light (load-theme 'zaiste t))
    ('dark (load-theme 'doom-ayu-dark t))))

(add-hook 'ns-system-appearance-change-functions #'my/apply-theme)

(after! heaven-and-hell
  (setq heaven-and-hell-themes
        '((light . zaiste)
          (dark . doom-ayu-dark)))
  ;; Optionall, load themes without asking for confirmation.
  (setq heaven-and-hell-load-theme-no-confirm t)
  (map! :g "C-c t T" 'heaven-and-hell-toggle-theme))

(add-hook 'after-init-hook 'heaven-and-hell-init-hook)

(after! doom-theme
  (setq doom-themes-enable-bold t
        doom-themes-enable-italic t))
#+end_src

* UI Configurations
#+begin_src emacs-lisp
;; Disable Emacs killing confirmation
(setq confirm-kill-emacs nil)

;transparent adjustment
 (set-frame-parameter (selected-frame) 'alpha '(92 . 80))
 (add-to-list 'default-frame-alist '(alpha . (92 . 80)))

;; This determines the style of line numbers in effect. If set to `nil', line
;; numbers are disabled. For relative line numbers, set this to `relative'.
(setq display-line-numbers-type nil)

;; remove title bar but round the window
(add-to-list 'default-frame-alist '(undecorated-round . t))
;; enable transparent titlebar with dark-mode
;; (add-to-list 'default-frame-alist '(ns-transparent-titlebar . t))

;; Maximize the window to fullscreen
(add-to-list 'initial-frame-alist '(fullscreen . maximized))

;; Customize the cursor
(setq-default
 cursor-type '(bar . 1)
 blink-cursor-delay 0
 blink-cursor-interval 0.4
 x-stretch-cursor t)

(blink-cursor-mode t)
#+end_src

* Languages Configurations
** Org Mode
#+begin_src emacs-lisp
(after! org
  (setq org-roam-directory "~/Documents/vault"
        org-roam-dailies-directory "journals/"
        org-roam-capture-templates
        '(("d" "default" plain
           "%?" :target
           (file+head "pages/${slug}.org" "#+title: ${title}\n")
           :unnarrowed t)))
  ;; customize org face attributes
  (set-face-attribute 'org-link nil :weight 'normal :background nil)
  (set-face-attribute 'org-code nil :foreground "#a9a1e1" :background nil)
  (set-face-attribute 'org-date nil :foreground "#5B6268" :background nil)
  (set-face-attribute 'org-level-1 nil :foreground "steelblue2" :background nil :height 1.2 :weight 'normal)
  (set-face-attribute 'org-level-2 nil :foreground "slategray2" :background nil :height 1.0 :weight 'normal)
  (set-face-attribute 'org-level-3 nil :foreground "SkyBlue2" :background nil :height 1.0 :weight 'normal)
  (set-face-attribute 'org-level-4 nil :foreground "DodgerBlue2" :background nil :height 1.0 :weight 'normal)
  (set-face-attribute 'org-level-5 nil :weight 'normal)
  (set-face-attribute 'org-level-6 nil :weight 'normal)
  (set-face-attribute 'org-document-title nil :foreground "SlateGray1" :background nil :height 1.75 :weight 'bold))
#+end_src
** Web Mode Configurations
#+begin_src emacs-lisp
(setq indent-tabs-mode nil
      web-mode-attr-indent-offset nil
      js-indent-level 2
      typescript-indent-level 2
      tab-width 2
      web-mode-code-indent-offset 2
      web-mode-css-indent-offset 2
      web-mode-markup-indent-offset 2

      web-mode-enable-auto-closing t
      web-mode-enable-auto-pairing t
      web-mode-auto-close-style 2
      web-mode-tag-auto-close-style 2)
#+end_src
** Rust
#+begin_src emacs-lisp
;; (after! lsp-rust
;;   (setq lsp-rust-server 'rust-analyzer))
#+end_src
* Clients Configurations
** LSP
#+begin_src emacs-lisp
(after! lsp
  (setq lsp-log-io nil
        lsp-idle-delay 0.5
        lsp-enable-file-watchers nil
        lsp-eslint-auto-fix-on-save t))
#+end_src
** Company
#+begin_src emacs-lisp
(after! company
  ;; disable inline previews
  (delq 'company-preview-if-just-one-frontend company-frontends)
  (setq company-idle-delay 0.0
        company-minimum-prefix-length 1)
  (setq company-show-numbers t))
#+end_src
** Copilot
#+begin_src emacs-lisp
;; accept completion from copilot and fallback to company
(use-package! copilot
  :hook (prog-mode . copilot-mode)
  :bind (("C-TAB" . 'copilot-accept-completion-by-word)
         ("C-<tab>" . 'copilot-accept-completion-by-word)
         :map copilot-completion-map
         ("<tab>" . 'copilot-accept-completion)
         ("TAB" . 'copilot-accept-completion)))
#+end_src
** ChatGPT
#+begin_src emacs-lisp
(use-package! chatgpt-shell)
#+end_src
** Magit
#+begin_src emacs-lisp
;; Remove `--literal-pathspecs` argument which was causing `pre-commit` to fail
(after! magit
  (setq magit-git-global-arguments (remove "--literal-pathspecs" magit-git-global-arguments)))

;; (after!
;;   (push
;;    '("er.github.com" "api.github.com" "github.com" forge-github-repository)
;;    forge-Balist))
#+end_src
